'use strict'

const _types = ['', 'audio', 'img', 'video', 'font', 'psd', 'vector', 'doc']
const _exts  = {
  // audio
  aac: 1,
  ac3: 1,
  adp: 1,
  aif: 1,
  aifc: 1,
  aiff: 1,
  amr: 1,
  au: 1,
  caf: 1,
  dra: 1,
  dts: 1,
  dtshd: 1,
  eol: 1,
  flac: 1,
  kar: 1,
  lvp: 1,
  m2a: 1,
  m3a: 1,
  m3u: 1,
  m4a: 1,
  m4b: 1,
  mid: 1,
  midi: 1,
  mka: 1,
  mp2: 1,
  mp2a: 1,
  mp3: 1,
  mp4a: 1,
  mpga: 1,
  oga: 1,
  pya: 1,
  ra: 1,
  ram: 1,
  rip: 1,
  rmi: 1,
  rmp: 1,
  s3m: 1,
  sil: 1,
  snd: 1,
  spx: 1,
  uva: 1,
  uvva: 1,
  voc: 1,
  wav: 1,
  wax: 1,
  weba: 1,
  wma: 1,
  xm: 1,
  // image
  '3ds': 2,
  bmp: 2,
  btif: 2,
  cmx: 2,
  djv: 2,
  djvu: 2,
  dwg: 2,
  dxf: 2,
  fbs: 2,
  fh: 2,
  fh4: 2,
  fh5: 2,
  fh7: 2,
  fhc: 2,
  fpx: 2,
  fst: 2,
  g3: 2,
  gif: 2,
  ico: 2,
  ief: 2,
  img: 2,
  jng: 2,
  jpe: 2,
  jpeg: 2,
  jpg: 2,
  ktx: 2,
  mdi: 2,
  mmr: 2,
  npx: 2,
  pbm: 2,
  pct: 2,
  pcx: 2,
  pgm: 2,
  pic: 2,
  png: 2,
  pnm: 2,
  ppm: 2,
  ras: 2,
  rgb: 2,
  rlc: 2,
  sgi: 2,
  sid: 2,
  sub: 2,
  tga: 2,
  tif: 2,
  tiff: 2,
  uvg: 2,
  uvi: 2,
  uvvg: 2,
  uvvi: 2,
  wbmp: 2,
  wdp: 2,
  webp: 2,
  xbm: 2,
  xif: 2,
  xpm: 2,
  xwd: 2,
  // video
  '3g2': 3,
  '3gp': 3,
  '3gpp': 3,
  asf: 3,
  asx: 3,
  avi: 3,
  dvb: 3,
  f4v: 3,
  fla: 3,
  flc: 3,
  fli: 3,
  flv: 3,
  fvt: 3,
  h261: 3,
  h263: 3,
  h264: 3,
  jpgm: 3,
  jpgv: 3,
  jpm: 3,
  m1v: 3,
  m2v: 3,
  m4u: 3,
  m4v: 3,
  mj2: 3,
  mjp2: 3,
  mk3d: 3,
  mks: 3,
  mkv: 3,
  mng: 3,
  mov: 3,
  movie: 3,
  mp4: 3,
  mp4v: 3,
  mpe: 3,
  mpeg: 3,
  mpg: 3,
  mpg4: 3,
  mxu: 3,
  ogg: 3,
  ogv: 3,
  pyv: 3,
  qt: 3,
  rm: 3,
  rmvb: 3,
  smv: 3,
  swf: 3,
  ts: 3,
  uvh: 3,
  uvm: 3,
  uvp: 3,
  uvs: 3,
  uvu: 3,
  uvv: 3,
  uvvh: 3,
  uvvm: 3,
  uvvp: 3,
  uvvs: 3,
  uvvu: 3,
  uvvv: 3,
  viv: 3,
  vob: 3,
  webm: 3,
  wm: 3,
  wmv: 3,
  wmx: 3,
  wvx: 3,
  // other
  fon: 4,
  otf: 4,
  ttc: 4,
  ttf: 4,
  woff: 4,
  woff2: 4,
  pdd: 5,
  psd: 5,
  ai: 6,
  cdr: 6,
  cgm: 6,
  emf: 6,
  eps: 6,
  svg: 6,
  svgz: 6,
  wmf: 6,
  pdf: 7,
  txt: 7
}

/*
  Returns audio, image, video, psd, font, doc, vector
*/
module.exports = function getMediaType(path) {
  if (path) {
    const i = path.lastIndexOf('/') + 2  // skip any slash and first dot
    const j = path.lastIndexOf('.')
    const ext = j > i ? path.slice(j + 1) : ''
    if (ext) {
      const idx = _exts[ext.toLowerCase()]
      if (idx) return _types[idx]
    }
  }
  return ''
}
